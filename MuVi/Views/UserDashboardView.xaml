<themes:ModernWindowBase x:Class="MuVi.Views.UserDashboardView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:themes="clr-namespace:MuVi.Resources.Themes"
        Title="MuVi - Xem Phim Online" 
        Height="900" Width="1600"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        Background="{StaticResource BackgroundGradientBrush}"
                         Style="{StaticResource ModernWindowStyle}">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Header Menu -->
        <Border Grid.Column="0" 
                Background="{StaticResource BackgroundDarkBrush}"
                BorderThickness="0,0,0,1"
                BorderBrush="{StaticResource MaterialDesignLightSeparatorBackground}">
            <Grid Margin="20,15">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Logo & Title -->
                <StackPanel Grid.Row="0" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <!-- App Name -->
                    <TextBlock Text="MuVi" 
               Style="{StaticResource TitleLabel}"
               FontSize="40"
               HorizontalAlignment="Center"
               Margin="0,0,0,0">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="{StaticResource PrimaryPurple}" 
                              BlurRadius="30" 
                              ShadowDepth="0" 
                              Opacity="0.8"/>
                        </TextBlock.Effect>
                    </TextBlock>
                </StackPanel>

                <!-- Menu Navigation -->
                <StackPanel Grid.Row="1" 
                            Orientation="Vertical"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Top">
                    <!-- Divider -->
                    <Border Height="1" 
                                Background="#3A3A3A" 
                                Margin="20,20"/>

                    <Button x:Name="btnHome"
                            Click="btnHome_Click"
                            Style="{StaticResource SidebarButton}">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Assets/Icons/icons8-home-page-50.png" Width="20" Height="20" Margin="0,0,12,0"/>
                            <TextBlock Text="Trang chủ" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Button x:Name="btnMovieList"
                            Click="btnMovieList_Click"
                            Style="{StaticResource SidebarButton}">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Assets/Icons/icons8-movies-60.png" Width="20" Height="20" Margin="0,0,12,0"/>
                            <TextBlock Text="Danh sách phim" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Button x:Name="btnFavorites"
                            Click="btnFavorites_Click"
                            Style="{StaticResource SidebarButton}">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Assets/Icons/icons8-heart-48.png" Width="20" Height="20" Margin="0,0,12,0"/>
                            <TextBlock Text="Yêu thích" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Button x:Name="btnHistory"
                            Click="btnHistory_Click"
                            Style="{StaticResource SidebarButton}">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Assets/Icons/icons8-history-50.png" Width="20" Height="20" Margin="0,0,12,0"/>
                            <TextBlock Text="Lịch sử xem" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <!-- Divider -->
                    <Border Height="1" 
                                Background="#3A3A3A" 
                                Margin="20,20"/>
                </StackPanel>

                <!-- User Profile -->
                <Border Grid.Row="2" 
                        Background="{StaticResource BackgroundLightBrush}"
                        Padding="15"
                        Margin="20"
                        CornerRadius="12"
                        Cursor="Hand">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Avatar -->
                        <Ellipse Grid.Column="0" Width="40" Height="40" Stroke="#8B5CF6" StrokeThickness="1">
                            <Ellipse.Fill>
                                <ImageBrush ImageSource="{Binding Avatar}" Stretch="UniformToFill"/>
                            </Ellipse.Fill>
                        </Ellipse>

                        <!-- User Info -->
                        <StackPanel Grid.Column="1" 
                                  Margin="12,0,0,0"
                                  VerticalAlignment="Center">
                            <TextBlock x:Name="txtUsername"
                                       Text="{Binding Username}" 
                                     Foreground="{StaticResource TextPrimaryBrush}"
                                     FontSize="13"
                                     FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding UserRole}" 
                                     Foreground="{StaticResource TextHintBrush}"
                                     FontSize="11"/>
                        </StackPanel>

                        <!-- Logout Icon -->
                        <Button Grid.Column="2"
                                Click="btnLogout_Click"
                                Padding="0"
                                VerticalAlignment="Center"
                                Background="Transparent"
                                Foreground="Transparent"
                                BorderThickness="0">
                            <Image Source="/Assets/Icons/icons8-logout-64.png"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"
                                   Height="30"
                                   Width="30"/>
                        </Button>
                    </Grid>
                </Border>
            </Grid>
        </Border>

        <!-- Main Content -->
        <ContentControl x:Name="MainContent" 
                        Grid.Column="1"/>
    </Grid>
</themes:ModernWindowBase>